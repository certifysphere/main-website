"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[9102],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=r.createContext({}),p=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},c=function(e){var t=p(e.components);return r.createElement(l.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),u=p(n),m=o,h=u["".concat(l,".").concat(m)]||u[m]||d[m]||a;return n?r.createElement(h,s(s({ref:t},c),{},{components:n})):r.createElement(h,s({ref:t},c))}));function h(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,s=new Array(a);s[0]=m;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i[u]="string"==typeof e?e:o,s[1]=i;for(var p=2;p<a;p++)s[p]=n[p];return r.createElement.apply(null,s)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},4983:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>a,metadata:()=>i,toc:()=>p});var r=n(7462),o=(n(7294),n(3905));const a={slug:"enabling-cors-in-an-express-node.js-app",title:"Enabling CORS in an Express Node.js app",authors:{name:"Vishal"},tags:["CORS","node","express"]},s=void 0,i={permalink:"/blog/enabling-cors-in-an-express-node.js-app",source:"@site/blog/2023-07-23-enable-cors-in-expressjs.md",title:"Enabling CORS in an Express Node.js app",description:"CORS (Cross-Origin Resource Sharing) is a security feature implemented by web browsers to restrict web pages from making requests to a different domain (origin) than the one the page was served from. It is a fundamental part of the Same-Origin Policy, which is designed to prevent malicious websites from accessing sensitive data from other websites.",date:"2023-07-23T00:00:00.000Z",formattedDate:"July 23, 2023",tags:[{label:"CORS",permalink:"/blog/tags/cors"},{label:"node",permalink:"/blog/tags/node"},{label:"express",permalink:"/blog/tags/express"}],readingTime:3.065,hasTruncateMarker:!1,authors:[{name:"Vishal"}],frontMatter:{slug:"enabling-cors-in-an-express-node.js-app",title:"Enabling CORS in an Express Node.js app",authors:{name:"Vishal"},tags:["CORS","node","express"]},prevItem:{title:"Build a Todo Management Application with React and Python Flask",permalink:"/blog/react-python-flask-todo-app"},nextItem:{title:"dotEnv(.env) files in Express Node.js app",permalink:"/blog/dotenv-files-nodejs-expressjs"}},l={authorsImageUrls:[void 0]},p=[],c={toc:p},u="wrapper";function d(e){let{components:t,...n}=e;return(0,o.kt)(u,(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"CORS (Cross-Origin Resource Sharing)")," is a security feature implemented by web browsers to restrict web pages from making requests to a different domain (origin) than the one the page was served from. It is a fundamental part of the ",(0,o.kt)("inlineCode",{parentName:"p"},"Same-Origin Policy"),", which is designed to prevent malicious websites from accessing sensitive data from other websites."),(0,o.kt)("p",null,"The Same-Origin Policy applies to requests made using XMLHttpRequest and the Fetch API in JavaScript. When a web page tries to make a cross-origin request, the browser blocks the request by default. However, there are legitimate use cases where cross-origin requests are necessary, such as when a frontend application needs to access data from an API hosted on a different domain."),(0,o.kt)("p",null,"In such cases, you need to enable CORS on the server-side to allow cross-origin requests. Enabling CORS involves adding specific HTTP headers to the server's response, which inform the browser that the server allows requests from specific origins."),(0,o.kt)("p",null,"Here's why you might need to enable CORS:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Frontend-Backend Separation: When your frontend application is running on a different domain or port than your backend API, you need to enable CORS to allow communication between them.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"API Access from Different Origins: If you want to make your API publicly accessible and allow other domains or applications to consume its data, you need to enable CORS to authorize cross-origin requests."))),(0,o.kt)("p",null,"Best practices for enabling CORS in a production environment:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"Restrict Allowed Origins"),": Only allow specific origins (domains) that you trust to access your API. Avoid using the wildcard (",(0,o.kt)("inlineCode",{parentName:"p"},"*"),") in the ",(0,o.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Access-Control-Allow-Origin"},"Access-Control-Allow-Origin")," header, as it allows any domain to access your API, potentially exposing sensitive data.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"Use Specific Methods"),": Explicitly specify the allowed HTTP methods in the ",(0,o.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Access-Control-Allow-Methods"},"Access-Control-Allow-Methods")," header. Limiting the methods to those required by your API reduces the risk of unauthorized actions.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"Handle Preflight Requests"),": For complex requests (e.g., those that use custom headers or methods other than GET, POST, or HEAD), the browser sends a preflight OPTIONS request to check if the server supports CORS. Make sure your server responds to these preflight requests with the appropriate headers.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"Secure Cookies"),": If your API uses cookies for authentication or session management, set the ",(0,o.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Access-Control-Allow-Credentials"},"Access-Control-Allow-Credentials")," header to ",(0,o.kt)("inlineCode",{parentName:"p"},"true"),". However, be cautious when allowing credentials with cross-origin requests, as it can pose security risks."))),(0,o.kt)("p",null,"Here's an example of enabling CORS in an Express Node.js app using the ",(0,o.kt)("inlineCode",{parentName:"p"},"cors")," middleware:"),(0,o.kt)("p",null,"First, you'll need to install the ",(0,o.kt)("inlineCode",{parentName:"p"},"cors")," package:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npm install cors\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"const express = require('express');\nconst cors = require('cors');\n\nconst app = express();\n\n// Enable CORS for all routes\napp.use(cors());\n\n// Or enable CORS for specific routes\n// app.get('/api/data', cors(), (req, res) => { ... });\n\n// Your other route handlers here...\n\nconst port = 3000;\napp.listen(port, () => {\n  console.log(`Server is running on port ${port}`);\n});\n")),(0,o.kt)("p",null,"By adding ",(0,o.kt)("inlineCode",{parentName:"p"},"app.use(cors())"),", you are enabling CORS for all routes in your Express app. This will allow requests from any domain to access your backend API."),(0,o.kt)("p",null,"You can also use it selectively for specific routes, as shown in the commented line.\nIf you want to restrict CORS to specific origins, you can pass an options object to the ",(0,o.kt)("inlineCode",{parentName:"p"},"cors")," middleware. For example, to allow requests from ",(0,o.kt)("inlineCode",{parentName:"p"},"http://example.com")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"http://localhost:3000"),", you can use the following code:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"app.use(cors({\n  origin: ['http://example.com', 'http://localhost:3000'],\n}));\n")),(0,o.kt)("p",null,"This way, requests from other domains will be blocked, and only requests from the specified origins will be allowed."),(0,o.kt)("p",null,"The middleware will add the necessary CORS headers to the server's response, allowing cross-origin requests from any domain by default. To restrict the allowed origins, you can pass an options object to the ",(0,o.kt)("inlineCode",{parentName:"p"},"cors()")," function with a ",(0,o.kt)("inlineCode",{parentName:"p"},"origin")," property specifying the allowed origins."))}d.isMDXComponent=!0}}]);